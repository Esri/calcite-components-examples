function t(){return(t=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])}return t}).apply(this,arguments)}function n(t){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(t)}var i=n(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),e=n(/Edge/i),o=n(/firefox/i),r=n(/safari/i)&&!n(/chrome/i)&&!n(/android/i),a=n(/iP(ad|od|hone)/i),u=n(/chrome/i)&&n(/android/i),s={capture:!1,passive:!1};function l(t,n,e){t.addEventListener(n,e,!i&&s)}function c(t,n,e){t.removeEventListener(n,e,!i&&s)}function f(t,n){if(n){if(">"===n[0]&&(n=n.substring(1)),t)try{if(t.matches)return t.matches(n);if(t.msMatchesSelector)return t.msMatchesSelector(n);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(n)}catch(t){return!1}return!1}}function h(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function d(t,n,i,e){if(t){i=i||document;do{if(null!=n&&(">"===n[0]?t.parentNode===i&&f(t,n):f(t,n))||e&&t===i)return t;if(t===i)break}while(t=h(t))}return null}var v,m=/\s+/g;function g(t,n,i){if(t&&n)if(t.classList)t.classList[i?"add":"remove"](n);else{var e=(" "+t.className+" ").replace(m," ").replace(" "+n+" "," ");t.className=(e+(i?" "+n:"")).replace(m," ")}}function p(t,n,i){var e=t&&t.style;if(e){if(void 0===i)return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(i=t.currentStyle),void 0===n?i:i[n];n in e||-1!==n.indexOf("webkit")||(n="-webkit-"+n),e[n]=i+("string"==typeof i?"":"px")}}function b(t,n){var i="";if("string"==typeof t)i=t;else do{var e=p(t,"transform");e&&"none"!==e&&(i=e+" "+i)}while(!n&&(t=t.parentNode));var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(i)}function w(t,n,i){if(t){var e=t.getElementsByTagName(n),o=0,r=e.length;if(i)for(;o<r;o++)i(e[o],o);return e}return[]}function E(){return document.scrollingElement||document.documentElement}function y(t,n,e,o,r){if(t.getBoundingClientRect||t===window){var a,u,s,l,c,f,h;if(t!==window&&t!==E()?(u=(a=t.getBoundingClientRect()).top,s=a.left,l=a.bottom,c=a.right,f=a.height,h=a.width):(u=0,s=0,l=window.innerHeight,c=window.innerWidth,f=window.innerHeight,h=window.innerWidth),(n||e)&&t!==window&&(r=r||t.parentNode,!i))do{if(r&&r.getBoundingClientRect&&("none"!==p(r,"transform")||e&&"static"!==p(r,"position"))){var d=r.getBoundingClientRect();u-=d.top+parseInt(p(r,"border-top-width")),s-=d.left+parseInt(p(r,"border-left-width")),l=u+a.height,c=s+a.width;break}}while(r=r.parentNode);if(o&&t!==window){var v=b(r||t),m=v&&v.a,g=v&&v.d;v&&(l=(u/=g)+(f/=g),c=(s/=m)+(h/=m))}return{top:u,left:s,bottom:l,right:c,width:h,height:f}}}function S(t,n,i){for(var e=M(t,!0),o=y(t)[n];e;){var r=y(e)[i];if(!("top"===i||"left"===i?o>=r:o<=r))return e;if(e===E())break;e=M(e,!1)}return!1}function I(t,n,i){for(var e=0,o=0,r=t.children;o<r.length;){if("none"!==r[o].style.display&&r[o]!==At.ghost&&r[o]!==At.dragged&&d(r[o],i.draggable,t,!1)){if(e===n)return r[o];e++}o++}return null}function T(t,n){for(var i=t.lastElementChild;i&&(i===At.ghost||"none"===p(i,"display")||n&&!f(i,n));)i=i.previousElementSibling;return i||null}function x(t,n){var i=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)"TEMPLATE"===t.nodeName.toUpperCase()||t===At.clone||n&&!f(t,n)||i++;return i}function O(t){var n=0,i=0,e=E();if(t)do{var o=b(t);n+=t.scrollLeft*o.a,i+=t.scrollTop*o.d}while(t!==e&&(t=t.parentNode));return[n,i]}function M(t,n){if(!t||!t.getBoundingClientRect)return E();var i=t,e=!1;do{if(i.clientWidth<i.scrollWidth||i.clientHeight<i.scrollHeight){var o=p(i);if(i.clientWidth<i.scrollWidth&&("auto"==o.overflowX||"scroll"==o.overflowX)||i.clientHeight<i.scrollHeight&&("auto"==o.overflowY||"scroll"==o.overflowY)){if(!i.getBoundingClientRect||i===document.body)return E();if(e||n)return i;e=!0}}}while(i=i.parentNode);return E()}function D(t,n){return Math.round(t.top)===Math.round(n.top)&&Math.round(t.left)===Math.round(n.left)&&Math.round(t.height)===Math.round(n.height)&&Math.round(t.width)===Math.round(n.width)}function _(t,n){return function(){if(!v){var i=arguments,e=this;1===i.length?t.call(e,i[0]):t.apply(e,i),v=setTimeout((function(){v=void 0}),n)}}}function C(t,n,i){t.scrollLeft+=n,t.scrollTop+=i}function k(t){var n=window.Polymer,i=window.jQuery||window.Zepto;return n&&n.dom?n.dom(t).cloneNode(!0):i?i(t).clone(!0)[0]:t.cloneNode(!0)}function A(t,n){p(t,"position","absolute"),p(t,"top",n.top),p(t,"left",n.left),p(t,"width",n.width),p(t,"height",n.height)}function j(t){p(t,"position",""),p(t,"top",""),p(t,"left",""),p(t,"width",""),p(t,"height","")}var N="Sortable"+(new Date).getTime(),z=[],P={initializeByDefault:!0},G={mount:function(t){for(var n in P)P.hasOwnProperty(n)&&!(n in t)&&(t[n]=P[n]);z.push(t)},pluginEvent:function(n,i,e){var o=this;this.eventCanceled=!1,e.cancel=function(){o.eventCanceled=!0};var r=n+"Global";z.forEach((function(o){i[o.pluginName]&&(i[o.pluginName][r]&&i[o.pluginName][r](t({sortable:i},e)),i.options[o.pluginName]&&i[o.pluginName][n]&&i[o.pluginName][n](t({sortable:i},e)))}))},initializePlugins:function(t,n,i){for(var e in z.forEach((function(e){var o=e.pluginName;if(t.options[o]||e.initializeByDefault){var r=new e(t,n,t.options);r.sortable=t,r.options=t.options,t[o]=r,Object.assign(i,r.defaults)}})),t.options)if(t.options.hasOwnProperty(e)){var o=this.modifyOption(t,e,t.options[e]);void 0!==o&&(t.options[e]=o)}},getEventProperties:function(t,n){var i={};return z.forEach((function(e){"function"==typeof e.eventProperties&&Object.assign(i,e.eventProperties.call(n[e.pluginName],t))})),i},modifyOption:function(t,n,i){var e;return z.forEach((function(o){t[o.pluginName]&&o.optionListeners&&"function"==typeof o.optionListeners[n]&&(e=o.optionListeners[n].call(t[o.pluginName],i))})),e}};function F(n){var o=n.sortable,r=n.rootEl,a=n.name,u=n.targetEl,s=n.cloneEl,l=n.toEl,c=n.fromEl,f=n.oldIndex,h=n.newIndex,d=n.oldDraggableIndex,v=n.newDraggableIndex,m=n.originalEvent,g=n.putSortable,p=n.extraEventProperties;if(o=o||r&&r[N]){var b,w=o.options,E="on"+a.charAt(0).toUpperCase()+a.substr(1);!window.CustomEvent||i||e?(b=document.createEvent("Event")).initEvent(a,!0,!0):b=new CustomEvent(a,{bubbles:!0,cancelable:!0}),b.to=l||r,b.from=c||r,b.item=u||r,b.clone=s,b.oldIndex=f,b.newIndex=h,b.oldDraggableIndex=d,b.newDraggableIndex=v,b.originalEvent=m,b.pullMode=g?g.lastPutMode:void 0;var y=t({},p,G.getEventProperties(a,o));for(var S in y)b[S]=y[S];r&&r.dispatchEvent(b),w[E]&&w[E].call(o,b)}}var B=function(n,i,e){var o=void 0===e?{}:e,r=o.evt,a=function(t,n){if(null==t)return{};var i,e,o={},r=Object.keys(t);for(e=0;e<r.length;e++)n.indexOf(i=r[e])>=0||(o[i]=t[i]);return o}(o,["evt"]);G.pluginEvent.bind(At)(n,i,t({dragEl:K,parentEl:L,ghostEl:R,rootEl:U,nextEl:V,lastDownEl:W,cloneEl:X,cloneHidden:Y,dragStarted:ut,putSortable:tt,activeSortable:At.active,originalEvent:r,oldIndex:Z,oldDraggableIndex:q,newIndex:$,newDraggableIndex:J,hideGhostForTarget:Mt,unhideGhostForTarget:Dt,cloneNowHidden:function(){Y=!0},cloneNowShown:function(){Y=!1},dispatchSortableEvent:function(t){H({sortable:i,name:t,originalEvent:r})}},a))};function H(n){F(t({putSortable:tt,cloneEl:X,targetEl:K,rootEl:U,oldIndex:Z,oldDraggableIndex:q,newIndex:$,newDraggableIndex:J},n))}var K,L,R,U,V,W,X,Y,Z,$,q,J,Q,tt,nt,it,et,ot,rt,at,ut,st,lt,ct,ft,ht=!1,dt=!1,vt=[],mt=!1,gt=!1,pt=[],bt=!1,wt=[],Et="undefined"!=typeof document,yt=a,St=e||i?"cssFloat":"float",It=Et&&!u&&!a&&"draggable"in document.createElement("div"),Tt=function(){if(Et){if(i)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto","auto"===t.style.pointerEvents}}(),xt=function(t,n){var i=p(t),e=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),o=I(t,0,n),r=I(t,1,n),a=o&&p(o),u=r&&p(r),s=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+y(o).width,l=u&&parseInt(u.marginLeft)+parseInt(u.marginRight)+y(r).width;return"flex"===i.display?"column"===i.flexDirection||"column-reverse"===i.flexDirection?"vertical":"horizontal":"grid"===i.display?i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal":o&&a.float&&"none"!==a.float?!r||"both"!==u.clear&&u.clear!==("left"===a.float?"left":"right")?"horizontal":"vertical":o&&("block"===a.display||"flex"===a.display||"table"===a.display||"grid"===a.display||s>=e&&"none"===i[St]||r&&"none"===i[St]&&s+l>e)?"vertical":"horizontal"},Ot=function(t){function n(t,i){return function(e,o,r,a){if(null==t&&(i||e.options.group.name&&o.options.group.name&&e.options.group.name===o.options.group.name))return!0;if(null==t||!1===t)return!1;if(i&&"clone"===t)return t;if("function"==typeof t)return n(t(e,o,r,a),i)(e,o,r,a);var u=(i?e:o).options.group.name;return!0===t||"string"==typeof t&&t===u||t.join&&t.indexOf(u)>-1}}var i={},e=t.group;e&&"object"==typeof e||(e={name:e}),i.name=e.name,i.checkPull=n(e.pull,!0),i.checkPut=n(e.put),i.revertClone=e.revertClone,t.group=i},Mt=function(){!Tt&&R&&p(R,"display","none")},Dt=function(){!Tt&&R&&p(R,"display","")};Et&&document.addEventListener("click",(function(t){if(dt)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),dt=!1,!1}),!0);var _t,Ct=function(t){if(K){var n=(o=(t=t.touches?t.touches[0]:t).clientX,r=t.clientY,vt.some((function(t){if(!T(t)){var n=y(t),i=t[N].options.emptyInsertThreshold;return i&&o>=n.left-i&&o<=n.right+i&&r>=n.top-i&&r<=n.bottom+i?a=t:void 0}})),a);if(n){var i={};for(var e in t)t.hasOwnProperty(e)&&(i[e]=t[e]);i.target=i.rootEl=n,i.preventDefault=void 0,i.stopPropagation=void 0,n[N]._onDragOver(i)}}var o,r,a},kt=function(t){K&&K.parentNode[N]._isOutsideThisEl(t.target)};function At(n,i){if(!n||!n.nodeType||1!==n.nodeType)throw"Sortable: `el` must be an HTMLElement, not "+{}.toString.call(n);this.el=n,this.options=i=Object.assign({},i),n[N]=this;var e,o,r={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(n.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return xt(n,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(t,n){t.setData("Text",n.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==At.supportPointer&&"PointerEvent"in window,emptyInsertThreshold:5};for(var a in G.initializePlugins(this,n,r),r)!(a in i)&&(i[a]=r[a]);for(var u in Ot(i),this)"_"===u.charAt(0)&&"function"==typeof this[u]&&(this[u]=this[u].bind(this));this.nativeDraggable=!i.forceFallback&&It,this.nativeDraggable&&(this.options.touchStartThreshold=1),i.supportPointer?l(n,"pointerdown",this._onTapStart):(l(n,"mousedown",this._onTapStart),l(n,"touchstart",this._onTapStart)),this.nativeDraggable&&(l(n,"dragover",this),l(n,"dragenter",this)),vt.push(this.el),i.store&&i.store.get&&this.sort(i.store.get(this)||[]),Object.assign(this,(o=[],{captureAnimationState:function(){o=[],this.options.animation&&[].slice.call(this.el.children).forEach((function(n){if("none"!==p(n,"display")&&void 0!==n){o.push({target:n,rect:y(n)});var i=t({},o[o.length-1].rect);if(n.thisAnimationDuration){var e=b(n,!0);e&&(i.top-=e.f,i.left-=e.e)}n.fromRect=i}}))},addAnimationState:function(t){o.push(t)},removeAnimationState:function(t){o.splice(function(t,n){for(var i in t)if(t.hasOwnProperty(i))for(var e in n)if(n.hasOwnProperty(e)&&n[e]===t[i][e])return Number(i);return-1}(o,{target:t}),1)},animateAll:function(t){var n=this;if(!this.options.animation)return clearTimeout(e),void("function"==typeof t&&t());var i=!1,r=0;o.forEach((function(t){var e=0,o=t.target,a=o.fromRect,u=y(o),s=o.prevFromRect,l=o.prevToRect,c=t.rect,f=b(o,!0);f&&(u.top-=f.f,u.left-=f.e),o.toRect=u,o.thisAnimationDuration&&D(s,u)&&!D(a,u)&&(c.top-u.top)/(c.left-u.left)==(a.top-u.top)/(a.left-u.left)&&(e=function(t,n,i,e){return Math.sqrt(Math.pow(n.top-t.top,2)+Math.pow(n.left-t.left,2))/Math.sqrt(Math.pow(n.top-i.top,2)+Math.pow(n.left-i.left,2))*e.animation}(c,s,l,n.options)),D(u,a)||(o.prevFromRect=a,o.prevToRect=u,e||(e=n.options.animation),n.animate(o,c,u,e)),e&&(i=!0,r=Math.max(r,e),clearTimeout(o.animationResetTimer),o.animationResetTimer=setTimeout((function(){o.animationTime=0,o.prevFromRect=null,o.fromRect=null,o.prevToRect=null,o.thisAnimationDuration=null}),e),o.thisAnimationDuration=e)})),clearTimeout(e),i?e=setTimeout((function(){"function"==typeof t&&t()}),r):"function"==typeof t&&t(),o=[]},animate:function(t,n,i,e){if(e){p(t,"transition",""),p(t,"transform","");var o=b(this.el),r=(n.left-i.left)/(o&&o.a||1),a=(n.top-i.top)/(o&&o.d||1);t.animatingX=!!r,t.animatingY=!!a,p(t,"transform","translate3d("+r+"px,"+a+"px,0)"),this.forRepaintDummy=function(t){return t.offsetWidth}(t),p(t,"transition","transform "+e+"ms"+(this.options.easing?" "+this.options.easing:"")),p(t,"transform","translate3d(0,0,0)"),"number"==typeof t.animated&&clearTimeout(t.animated),t.animated=setTimeout((function(){p(t,"transition",""),p(t,"transform",""),t.animated=!1,t.animatingX=!1,t.animatingY=!1}),e)}}}))}function jt(t,n,o,r,a,u,s,l){var c,f,h=t[N],d=h.options.onMove;return!window.CustomEvent||i||e?(c=document.createEvent("Event")).initEvent("move",!0,!0):c=new CustomEvent("move",{bubbles:!0,cancelable:!0}),c.to=n,c.from=t,c.dragged=o,c.draggedRect=r,c.related=a||n,c.relatedRect=u||y(n),c.willInsertAfter=l,c.originalEvent=s,t.dispatchEvent(c),d&&(f=d.call(h,c,s)),f}function Nt(t){t.draggable=!1}function zt(){bt=!1}function Pt(t){for(var n=t.tagName+t.className+t.src+t.href+t.textContent,i=n.length,e=0;i--;)e+=n.charCodeAt(i);return e.toString(36)}function Gt(t){return setTimeout(t,0)}function Ft(t){return clearTimeout(t)}At.prototype={constructor:At,_isOutsideThisEl:function(t){this.el.contains(t)||t===this.el||(st=null)},_getDirection:function(t,n){return"function"==typeof this.options.direction?this.options.direction.call(this,t,n,K):this.options.direction},_onTapStart:function(t){if(t.cancelable){var n=this,i=this.el,e=this.options,o=e.preventOnFilter,a=t.type,u=t.touches&&t.touches[0]||t.pointerType&&"touch"===t.pointerType&&t,s=(u||t).target,l=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||s,c=e.filter;if(function(t){wt.length=0;for(var n=t.getElementsByTagName("input"),i=n.length;i--;){var e=n[i];e.checked&&wt.push(e)}}(i),!K&&!(/mousedown|pointerdown/.test(a)&&0!==t.button||e.disabled)&&!l.isContentEditable&&(this.nativeDraggable||!r||!s||"SELECT"!==s.tagName.toUpperCase())&&!((s=d(s,e.draggable,i,!1))&&s.animated||W===s)){if(Z=x(s),q=x(s,e.draggable),"function"==typeof c){if(c.call(this,t,s,this))return H({sortable:n,rootEl:l,name:"filter",targetEl:s,toEl:i,fromEl:i}),B("filter",n,{evt:t}),void(o&&t.cancelable&&t.preventDefault())}else if(c&&(c=c.split(",").some((function(e){if(e=d(l,e.trim(),i,!1))return H({sortable:n,rootEl:e,name:"filter",targetEl:s,fromEl:i,toEl:i}),B("filter",n,{evt:t}),!0}))))return void(o&&t.cancelable&&t.preventDefault());e.handle&&!d(l,e.handle,i,!1)||this._prepareDragStart(t,u,s)}}},_prepareDragStart:function(t,n,r){var a,u=this,s=u.el,c=u.options,f=s.ownerDocument;if(r&&!K&&r.parentNode===s){var h=y(r);if(U=s,L=(K=r).parentNode,V=K.nextSibling,W=r,Q=c.group,At.dragged=K,rt=(nt={target:K,clientX:(n||t).clientX,clientY:(n||t).clientY}).clientX-h.left,at=nt.clientY-h.top,this._lastX=(n||t).clientX,this._lastY=(n||t).clientY,K.style["will-change"]="all",a=function(){B("delayEnded",u,{evt:t}),At.eventCanceled?u._onDrop():(u._disableDelayedDragEvents(),!o&&u.nativeDraggable&&(K.draggable=!0),u._triggerDragStart(t,n),H({sortable:u,name:"choose",originalEvent:t}),g(K,c.chosenClass,!0))},c.ignore.split(",").forEach((function(t){w(K,t.trim(),Nt)})),l(f,"dragover",Ct),l(f,"mousemove",Ct),l(f,"touchmove",Ct),l(f,"mouseup",u._onDrop),l(f,"touchend",u._onDrop),l(f,"touchcancel",u._onDrop),o&&this.nativeDraggable&&(this.options.touchStartThreshold=4,K.draggable=!0),B("delayStart",this,{evt:t}),!c.delay||c.delayOnTouchOnly&&!n||this.nativeDraggable&&(e||i))a();else{if(At.eventCanceled)return void this._onDrop();l(f,"mouseup",u._disableDelayedDrag),l(f,"touchend",u._disableDelayedDrag),l(f,"touchcancel",u._disableDelayedDrag),l(f,"mousemove",u._delayedDragTouchMoveHandler),l(f,"touchmove",u._delayedDragTouchMoveHandler),c.supportPointer&&l(f,"pointermove",u._delayedDragTouchMoveHandler),u._dragStartTimer=setTimeout(a,c.delay)}}},_delayedDragTouchMoveHandler:function(t){var n=t.touches?t.touches[0]:t;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){K&&Nt(K),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;c(t,"mouseup",this._disableDelayedDrag),c(t,"touchend",this._disableDelayedDrag),c(t,"touchcancel",this._disableDelayedDrag),c(t,"mousemove",this._delayedDragTouchMoveHandler),c(t,"touchmove",this._delayedDragTouchMoveHandler),c(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,n){n=n||"touch"==t.pointerType&&t,!this.nativeDraggable||n?l(document,this.options.supportPointer?"pointermove":n?"touchmove":"mousemove",this._onTouchMove):(l(K,"dragend",this),l(U,"dragstart",this._onDragStart));try{document.selection?Gt((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(t){}},_dragStarted:function(t,n){if(ht=!1,U&&K){B("dragStarted",this,{evt:n}),this.nativeDraggable&&l(document,"dragover",kt);var i=this.options;!t&&g(K,i.dragClass,!1),g(K,i.ghostClass,!0),At.active=this,t&&this._appendGhost(),H({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(it){this._lastX=it.clientX,this._lastY=it.clientY,Mt();for(var t=document.elementFromPoint(it.clientX,it.clientY),n=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(it.clientX,it.clientY))!==n;)n=t;if(K.parentNode[N]._isOutsideThisEl(t),n)do{if(n[N]&&n[N]._onDragOver({clientX:it.clientX,clientY:it.clientY,target:t,rootEl:n})&&!this.options.dragoverBubble)break;t=n}while(n=n.parentNode);Dt()}},_onTouchMove:function(t){if(nt){var n=this.options,i=n.fallbackTolerance,e=n.fallbackOffset,o=t.touches?t.touches[0]:t,r=R&&b(R,!0),a=R&&r&&r.a,u=R&&r&&r.d,s=yt&&ft&&O(ft),l=(o.clientX-nt.clientX+e.x)/(a||1)+(s?s[0]-pt[0]:0)/(a||1),c=(o.clientY-nt.clientY+e.y)/(u||1)+(s?s[1]-pt[1]:0)/(u||1);if(!At.active&&!ht){if(i&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<i)return;this._onDragStart(t,!0)}if(R){r?(r.e+=l-(et||0),r.f+=c-(ot||0)):r={a:1,b:0,c:0,d:1,e:l,f:c};var f="matrix("+r.a+","+r.b+","+r.c+","+r.d+","+r.e+","+r.f+")";p(R,"webkitTransform",f),p(R,"mozTransform",f),p(R,"msTransform",f),p(R,"transform",f),et=l,ot=c,it=o}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!R){var t=this.options.fallbackOnBody?document.body:U,n=y(K,!0,yt,!0,t),i=this.options;if(yt){for(ft=t;"static"===p(ft,"position")&&"none"===p(ft,"transform")&&ft!==document;)ft=ft.parentNode;ft!==document.body&&ft!==document.documentElement?(ft===document&&(ft=E()),n.top+=ft.scrollTop,n.left+=ft.scrollLeft):ft=E(),pt=O(ft)}g(R=K.cloneNode(!0),i.ghostClass,!1),g(R,i.fallbackClass,!0),g(R,i.dragClass,!0),p(R,"transition",""),p(R,"transform",""),p(R,"box-sizing","border-box"),p(R,"margin",0),p(R,"top",n.top),p(R,"left",n.left),p(R,"width",n.width),p(R,"height",n.height),p(R,"opacity","0.8"),p(R,"position",yt?"absolute":"fixed"),p(R,"zIndex","100000"),p(R,"pointerEvents","none"),At.ghost=R,t.appendChild(R),p(R,"transform-origin",rt/parseInt(R.style.width)*100+"% "+at/parseInt(R.style.height)*100+"%")}},_onDragStart:function(t,n){var i=this,e=t.dataTransfer,o=i.options;B("dragStart",this,{evt:t}),At.eventCanceled?this._onDrop():(B("setupClone",this),At.eventCanceled||((X=k(K)).draggable=!1,X.style["will-change"]="",this._hideClone(),g(X,this.options.chosenClass,!1),At.clone=X),i.cloneId=Gt((function(){B("clone",i),At.eventCanceled||(i.options.removeCloneOnHide||U.insertBefore(X,K),i._hideClone(),H({sortable:i,name:"clone"}))})),!n&&g(K,o.dragClass,!0),n?(dt=!0,i._loopId=setInterval(i._emulateDragOver,50)):(c(document,"mouseup",i._onDrop),c(document,"touchend",i._onDrop),c(document,"touchcancel",i._onDrop),e&&(e.effectAllowed="move",o.setData&&o.setData.call(i,e,K)),l(document,"drop",i),p(K,"transform","translateZ(0)")),ht=!0,i._dragStartId=Gt(i._dragStarted.bind(i,n,t)),l(document,"selectstart",i),ut=!0,r&&p(document.body,"user-select","none"))},_onDragOver:function(n){var i,e,o,r,a=this.el,u=n.target,s=this.options,l=s.group,c=At.active,f=Q===l,h=s.sort,v=tt||c,m=this,b=!1;if(!bt){if(void 0!==n.preventDefault&&n.cancelable&&n.preventDefault(),u=d(u,s.draggable,a,!0),F("dragOver"),At.eventCanceled)return b;if(K.contains(n.target)||u.animated&&u.animatingX&&u.animatingY||m._ignoreWhileAnimating===u)return X(!1);if(dt=!1,c&&!s.disabled&&(f?h||(o=!U.contains(K)):tt===this||(this.lastPutMode=Q.checkPull(this,c,K,n))&&l.checkPut(this,c,K,n))){if(r="vertical"===this._getDirection(n,u),i=y(K),F("dragOverValid"),At.eventCanceled)return b;if(o)return L=U,W(),this._hideClone(),F("revert"),At.eventCanceled||(V?U.insertBefore(K,V):U.appendChild(K)),X(!0);var w=T(a,s.draggable);if(!w||function(t,n,i){var e=y(T(i.el,i.options.draggable));return n?t.clientX>e.right+10||t.clientX<=e.right&&t.clientY>e.bottom&&t.clientX>=e.left:t.clientX>e.right&&t.clientY>e.top||t.clientX<=e.right&&t.clientY>e.bottom+10}(n,r,this)&&!w.animated){if(w===K)return X(!1);if(w&&a===n.target&&(u=w),u&&(e=y(u)),!1!==jt(U,a,K,i,u,e,n,!!u))return W(),a.appendChild(K),L=a,Y(),X(!0)}else if(u.parentNode===a){e=y(u);var E,I,O,M=K.parentNode!==a,D=!function(t,n,i){var e=i?t.left:t.top,o=i?n.left:n.top;return e===o||(i?t.right:t.bottom)===(i?n.right:n.bottom)||e+(i?t.width:t.height)/2===o+(i?n.width:n.height)/2}(K.animated&&K.toRect||i,u.animated&&u.toRect||e,r),_=r?"top":"left",k=S(u,"top","top")||S(K,"top","top"),A=k?k.scrollTop:void 0;if(st!==u&&(I=e[_],mt=!1,gt=!D&&s.invertSwap||M),0!==(E=function(t,n,i,e,o,r,a,u){var s=e?t.clientY:t.clientX,l=e?i.height:i.width,c=e?i.top:i.left,f=e?i.bottom:i.right,h=!1;if(!a)if(u&&ct<l*o){if(!mt&&(1===lt?s>c+l*r/2:s<f-l*r/2)&&(mt=!0),mt)h=!0;else if(1===lt?s<c+ct:s>f-ct)return-lt}else if(s>c+l*(1-o)/2&&s<f-l*(1-o)/2)return function(t){return x(K)<x(t)?1:-1}(n);return(h=h||a)&&(s<c+l*r/2||s>f-l*r/2)?s>c+l/2?1:-1:0}(n,u,e,r,D?1:s.swapThreshold,null==s.invertedSwapThreshold?s.swapThreshold:s.invertedSwapThreshold,gt,st===u))){var j=x(K);do{O=L.children[j-=E]}while(O&&("none"===p(O,"display")||O===R))}if(0===E||O===u)return X(!1);st=u,lt=E;var z=u.nextElementSibling,P=!1,G=jt(U,a,K,i,u,e,n,P=1===E);if(!1!==G)return 1!==G&&-1!==G||(P=1===G),bt=!0,setTimeout(zt,30),W(),P&&!z?a.appendChild(K):u.parentNode.insertBefore(K,P?z:u),k&&C(k,0,A-k.scrollTop),L=K.parentNode,void 0===I||gt||(ct=Math.abs(I-y(u)[_])),Y(),X(!0)}if(a.contains(K))return X(!1)}return!1}function F(s,l){B(s,m,t({evt:n,isOwner:f,axis:r?"vertical":"horizontal",revert:o,dragRect:i,targetRect:e,canSort:h,fromSortable:v,target:u,completed:X,onMove:function(t,e){return jt(U,a,K,i,t,y(t),n,e)},changed:Y},l))}function W(){F("dragOverAnimationCapture"),m.captureAnimationState(),m!==v&&v.captureAnimationState()}function X(t){return F("dragOverCompleted",{insertion:t}),t&&(f?c._hideClone():c._showClone(m),m!==v&&(g(K,tt?tt.options.ghostClass:c.options.ghostClass,!1),g(K,s.ghostClass,!0)),tt!==m&&m!==At.active?tt=m:m===At.active&&tt&&(tt=null),v===m&&(m._ignoreWhileAnimating=u),m.animateAll((function(){F("dragOverAnimationComplete"),m._ignoreWhileAnimating=null})),m!==v&&(v.animateAll(),v._ignoreWhileAnimating=null)),(u===K&&!K.animated||u===a&&!u.animated)&&(st=null),s.dragoverBubble||n.rootEl||u===document||(K.parentNode[N]._isOutsideThisEl(n.target),!t&&Ct(n)),!s.dragoverBubble&&n.stopPropagation&&n.stopPropagation(),b=!0}function Y(){$=x(K),J=x(K,s.draggable),H({sortable:m,name:"change",toEl:a,newIndex:$,newDraggableIndex:J,originalEvent:n})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){c(document,"mousemove",this._onTouchMove),c(document,"touchmove",this._onTouchMove),c(document,"pointermove",this._onTouchMove),c(document,"dragover",Ct),c(document,"mousemove",Ct),c(document,"touchmove",Ct)},_offUpEvents:function(){var t=this.el.ownerDocument;c(t,"mouseup",this._onDrop),c(t,"touchend",this._onDrop),c(t,"pointerup",this._onDrop),c(t,"touchcancel",this._onDrop),c(document,"selectstart",this)},_onDrop:function(t){var n=this.el,i=this.options;$=x(K),J=x(K,i.draggable),B("drop",this,{evt:t}),L=K&&K.parentNode,$=x(K),J=x(K,i.draggable),At.eventCanceled||(ht=!1,gt=!1,mt=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Ft(this.cloneId),Ft(this._dragStartId),this.nativeDraggable&&(c(document,"drop",this),c(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),r&&p(document.body,"user-select",""),p(K,"transform",""),t&&(ut&&(t.cancelable&&t.preventDefault(),!i.dropBubble&&t.stopPropagation()),R&&R.parentNode&&R.parentNode.removeChild(R),(U===L||tt&&"clone"!==tt.lastPutMode)&&X&&X.parentNode&&X.parentNode.removeChild(X),K&&(this.nativeDraggable&&c(K,"dragend",this),Nt(K),K.style["will-change"]="",ut&&!ht&&g(K,tt?tt.options.ghostClass:this.options.ghostClass,!1),g(K,this.options.chosenClass,!1),H({sortable:this,name:"unchoose",toEl:L,newIndex:null,newDraggableIndex:null,originalEvent:t}),U!==L?($>=0&&(H({rootEl:L,name:"add",toEl:L,fromEl:U,originalEvent:t}),H({sortable:this,name:"remove",toEl:L,originalEvent:t}),H({rootEl:L,name:"sort",toEl:L,fromEl:U,originalEvent:t}),H({sortable:this,name:"sort",toEl:L,originalEvent:t})),tt&&tt.save()):$!==Z&&$>=0&&(H({sortable:this,name:"update",toEl:L,originalEvent:t}),H({sortable:this,name:"sort",toEl:L,originalEvent:t})),At.active&&(null!=$&&-1!==$||($=Z,J=q),H({sortable:this,name:"end",toEl:L,originalEvent:t}),this.save())))),this._nulling()},_nulling:function(){B("nulling",this),U=K=L=R=V=X=W=Y=nt=it=ut=$=J=Z=q=st=lt=tt=Q=At.dragged=At.ghost=At.clone=At.active=null,wt.forEach((function(t){t.checked=!0})),wt.length=et=ot=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":K&&(this._onDragOver(t),function(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}(t));break;case"selectstart":t.preventDefault()}},toArray:function(){for(var t,n=[],i=this.el.children,e=0,o=i.length,r=this.options;e<o;e++)d(t=i[e],r.draggable,this.el,!1)&&n.push(t.getAttribute(r.dataIdAttr)||Pt(t));return n},sort:function(t){var n={},i=this.el;this.toArray().forEach((function(t,e){var o=i.children[e];d(o,this.options.draggable,i,!1)&&(n[t]=o)}),this),t.forEach((function(t){n[t]&&(i.removeChild(n[t]),i.appendChild(n[t]))}))},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,n){return d(t,n||this.options.draggable,this.el,!1)},option:function(t,n){var i=this.options;if(void 0===n)return i[t];var e=G.modifyOption(this,t,n);i[t]=void 0!==e?e:n,"group"===t&&Ot(i)},destroy:function(){B("destroy",this);var t=this.el;t[N]=null,c(t,"mousedown",this._onTapStart),c(t,"touchstart",this._onTapStart),c(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(c(t,"dragover",this),c(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),(function(t){t.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),vt.splice(vt.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!Y){if(B("hideClone",this),At.eventCanceled)return;p(X,"display","none"),this.options.removeCloneOnHide&&X.parentNode&&X.parentNode.removeChild(X),Y=!0}},_showClone:function(t){if("clone"===t.lastPutMode){if(Y){if(B("showClone",this),At.eventCanceled)return;K.parentNode!=U||this.options.group.revertClone?V?U.insertBefore(X,V):U.appendChild(X):U.insertBefore(X,K),this.options.group.revertClone&&this.animate(K,X),p(X,"display",""),Y=!1}}else this._hideClone()}},Et&&l(document,"touchmove",(function(t){(At.active||ht)&&t.cancelable&&t.preventDefault()})),At.utils={on:l,off:c,css:p,find:w,is:function(t,n){return!!d(t,n,t,!1)},extend:function(t,n){if(t&&n)for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i]);return t},throttle:_,closest:d,toggleClass:g,clone:k,index:x,nextTick:Gt,cancelNextTick:Ft,detectDirection:xt,getChild:I},At.get=function(t){return t[N]},At.mount=function(){var n=[].slice.call(arguments);n[0].constructor===Array&&(n=n[0]),n.forEach((function(n){if(!n.prototype||!n.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not "+{}.toString.call(n);n.utils&&(At.utils=t({},At.utils,n.utils)),G.mount(n)}))},At.create=function(t,n){return new At(t,n)},At.version="1.12.0";var Bt,Ht,Kt,Lt,Rt,Ut=[],Vt=[],Wt=!1,Xt=!1,Yt=!1;function Zt(t,n){Vt.forEach((function(i,e){var o=n.children[i.sortableIndex+(t?Number(e):0)];o?n.insertBefore(i,o):n.appendChild(i)}))}function $t(){Ut.forEach((function(t){t!==Kt&&t.parentNode&&t.parentNode.removeChild(t)}))}var qt=function(t){var n=t.originalEvent,i=t.putSortable,e=t.dragEl,o=t.dispatchSortableEvent,r=t.unhideGhostForTarget;if(n){var a=i||t.activeSortable;(0,t.hideGhostForTarget)();var u=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,s=document.elementFromPoint(u.clientX,u.clientY);r(),a&&!a.el.contains(s)&&(o("spill"),this.onSpill({dragEl:e,putSortable:i}))}};function Jt(){}function Qt(){}Jt.prototype={startIndex:null,dragStart:function(t){this.startIndex=t.oldDraggableIndex},onSpill:function(t){var n=t.dragEl,i=t.putSortable;this.sortable.captureAnimationState(),i&&i.captureAnimationState();var e=I(this.sortable.el,this.startIndex,this.options);e?this.sortable.el.insertBefore(n,e):this.sortable.el.appendChild(n),this.sortable.animateAll(),i&&i.animateAll()},drop:qt},Object.assign(Jt,{pluginName:"revertOnSpill"}),Qt.prototype={onSpill:function(t){var n=t.dragEl,i=t.putSortable||this.sortable;i.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),i.animateAll()},drop:qt},Object.assign(Qt,{pluginName:"removeOnSpill"});var tn,nn,en,on,rn,an,un=[],sn=!1;function ln(){un.forEach((function(t){clearInterval(t.pid)})),un=[]}function cn(){clearInterval(an)}var fn=_((function(t,n,i,e){if(n.scroll){var o,r=(t.touches?t.touches[0]:t).clientX,a=(t.touches?t.touches[0]:t).clientY,u=n.scrollSensitivity,s=n.scrollSpeed,l=E(),c=!1;nn!==i&&(nn=i,ln(),o=n.scrollFn,!0===(tn=n.scroll)&&(tn=M(i,!0)));var f=0,h=tn;do{var d=h,v=y(d),m=v.top,g=v.bottom,b=v.left,w=v.right,S=v.width,I=v.height,T=void 0,x=void 0,O=d.scrollWidth,D=d.scrollHeight,_=p(d),k=d.scrollLeft,A=d.scrollTop;d===l?(T=S<O&&("auto"===_.overflowX||"scroll"===_.overflowX||"visible"===_.overflowX),x=I<D&&("auto"===_.overflowY||"scroll"===_.overflowY||"visible"===_.overflowY)):(T=S<O&&("auto"===_.overflowX||"scroll"===_.overflowX),x=I<D&&("auto"===_.overflowY||"scroll"===_.overflowY));var j=T&&(Math.abs(w-r)<=u&&k+S<O)-(Math.abs(b-r)<=u&&!!k),z=x&&(Math.abs(g-a)<=u&&A+I<D)-(Math.abs(m-a)<=u&&!!A);if(!un[f])for(var P=0;P<=f;P++)un[P]||(un[P]={});un[f].vx==j&&un[f].vy==z&&un[f].el===d||(un[f].el=d,un[f].vx=j,un[f].vy=z,clearInterval(un[f].pid),0==j&&0==z||(c=!0,un[f].pid=setInterval(function(){e&&0===this.layer&&At.active._onTouchMove(rn);var n=un[this.layer].vy?un[this.layer].vy*s:0,i=un[this.layer].vx?un[this.layer].vx*s:0;"function"==typeof o&&"continue"!==o.call(At.dragged.parentNode[N],i,n,t,rn,un[this.layer].el)||C(un[this.layer].el,i,n)}.bind({layer:f}),24))),f++}while(n.bubbleScroll&&h!==l&&(h=M(h,!1)));sn=c}}),30);At.mount(new function(){function t(){for(var t in this.defaults={scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===t.charAt(0)&&"function"==typeof this[t]&&(this[t]=this[t].bind(this))}return t.prototype={dragStarted:function(t){var n=t.originalEvent;this.sortable.nativeDraggable?l(document,"dragover",this._handleAutoScroll):l(document,this.options.supportPointer?"pointermove":n.touches?"touchmove":"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var n=t.originalEvent;this.options.dragOverBubble||n.rootEl||this._handleAutoScroll(n)},drop:function(){this.sortable.nativeDraggable?c(document,"dragover",this._handleAutoScroll):(c(document,"pointermove",this._handleFallbackAutoScroll),c(document,"touchmove",this._handleFallbackAutoScroll),c(document,"mousemove",this._handleFallbackAutoScroll)),cn(),ln(),clearTimeout(v),v=void 0},nulling:function(){rn=nn=tn=sn=an=en=on=null,un.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,n){var o=this,a=(t.touches?t.touches[0]:t).clientX,u=(t.touches?t.touches[0]:t).clientY,s=document.elementFromPoint(a,u);if(rn=t,n||e||i||r){fn(t,this.options,s,n);var l=M(s,!0);!sn||an&&a===en&&u===on||(an&&cn(),an=setInterval((function(){var i=M(document.elementFromPoint(a,u),!0);i!==l&&(l=i,ln()),fn(t,o.options,i,n)}),10),en=a,on=u)}else{if(!this.options.bubbleScroll||M(s,!0)===E())return void ln();fn(t,this.options,M(s,!1),!1)}}},Object.assign(t,{pluginName:"scroll",initializeByDefault:!0})}),At.mount(Qt,Jt),At.mount(new function(){function t(){this.defaults={swapClass:"sortable-swap-highlight"}}return t.prototype={dragStart:function(t){_t=t.dragEl},dragOverValid:function(t){var n=t.completed,i=t.target,e=t.changed,o=t.cancel;if(t.activeSortable.options.swap){var r=this.options;if(i&&i!==this.sortable.el){var a=_t;!1!==(0,t.onMove)(i)?(g(i,r.swapClass,!0),_t=i):_t=null,a&&a!==_t&&g(a,r.swapClass,!1)}e(),n(!0),o()}},drop:function(t){var n,i,e,o,r,a,u=t.activeSortable,s=t.putSortable,l=t.dragEl,c=s||this.sortable,f=this.options;_t&&g(_t,f.swapClass,!1),_t&&(f.swap||s&&s.options.swap)&&l!==_t&&(c.captureAnimationState(),c!==u&&u.captureAnimationState(),a=(i=_t).parentNode,(r=(n=l).parentNode)&&a&&!r.isEqualNode(i)&&!a.isEqualNode(n)&&(e=x(n),o=x(i),r.isEqualNode(a)&&e<o&&o++,r.insertBefore(i,r.children[e]),a.insertBefore(n,a.children[o])),c.animateAll(),c!==u&&u.animateAll())},nulling:function(){_t=null}},Object.assign(t,{pluginName:"swap",eventProperties:function(){return{swapItem:_t}}})}),At.mount(new function(){function t(t){for(var n in this)"_"===n.charAt(0)&&"function"==typeof this[n]&&(this[n]=this[n].bind(this));t.options.supportPointer?l(document,"pointerup",this._deselectMultiDrag):(l(document,"mouseup",this._deselectMultiDrag),l(document,"touchend",this._deselectMultiDrag)),l(document,"keydown",this._checkKeyDown),l(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(n,i){var e="";Ut.length&&Ht===t?Ut.forEach((function(t,n){e+=(n?", ":"")+t.textContent})):e=i.textContent,n.setData("Text",e)}}}return t.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(t){Kt=t.dragEl},delayEnded:function(){this.isMultiDrag=~Ut.indexOf(Kt)},setupClone:function(t){var n=t.sortable,i=t.cancel;if(this.isMultiDrag){for(var e=0;e<Ut.length;e++)Vt.push(k(Ut[e])),Vt[e].sortableIndex=Ut[e].sortableIndex,Vt[e].draggable=!1,Vt[e].style["will-change"]="",g(Vt[e],this.options.selectedClass,!1),Ut[e]===Kt&&g(Vt[e],this.options.chosenClass,!1);n._hideClone(),i()}},clone:function(t){var n=t.dispatchSortableEvent,i=t.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||Ut.length&&Ht===t.sortable&&(Zt(!0,t.rootEl),n("clone"),i()))},showClone:function(t){var n=t.cloneNowShown,i=t.cancel;this.isMultiDrag&&(Zt(!1,t.rootEl),Vt.forEach((function(t){p(t,"display","")})),n(),Rt=!1,i())},hideClone:function(t){var n=this,i=t.cloneNowHidden,e=t.cancel;this.isMultiDrag&&(Vt.forEach((function(t){p(t,"display","none"),n.options.removeCloneOnHide&&t.parentNode&&t.parentNode.removeChild(t)})),i(),Rt=!0,e())},dragStartGlobal:function(){!this.isMultiDrag&&Ht&&Ht.multiDrag._deselectMultiDrag(),Ut.forEach((function(t){t.sortableIndex=x(t)})),Ut=Ut.sort((function(t,n){return t.sortableIndex-n.sortableIndex})),Yt=!0},dragStarted:function(t){var n=this,i=t.sortable;if(this.isMultiDrag){if(this.options.sort&&(i.captureAnimationState(),this.options.animation)){Ut.forEach((function(t){t!==Kt&&p(t,"position","absolute")}));var e=y(Kt,!1,!0,!0);Ut.forEach((function(t){t!==Kt&&A(t,e)})),Xt=!0,Wt=!0}i.animateAll((function(){Xt=!1,Wt=!1,n.options.animation&&Ut.forEach((function(t){j(t)})),n.options.sort&&$t()}))}},dragOver:function(t){var n=t.completed,i=t.cancel;Xt&&~Ut.indexOf(t.target)&&(n(!1),i())},revert:function(t){var n=t.fromSortable,i=t.rootEl,e=t.sortable,o=t.dragRect;Ut.length>1&&(Ut.forEach((function(t){e.addAnimationState({target:t,rect:Xt?y(t):o}),j(t),t.fromRect=o,n.removeAnimationState(t)})),Xt=!1,function(t,n){Ut.forEach((function(i,e){var o=n.children[i.sortableIndex+(t?Number(e):0)];o?n.insertBefore(i,o):n.appendChild(i)}))}(!this.options.removeCloneOnHide,i))},dragOverCompleted:function(t){var n=t.sortable,i=t.isOwner,e=t.activeSortable,o=t.parentEl,r=t.putSortable,a=this.options;if(t.insertion){if(i&&e._hideClone(),Wt=!1,a.animation&&Ut.length>1&&(Xt||!i&&!e.options.sort&&!r)){var u=y(Kt,!1,!0,!0);Ut.forEach((function(t){t!==Kt&&(A(t,u),o.appendChild(t))})),Xt=!0}if(!i)if(Xt||$t(),Ut.length>1){var s=Rt;e._showClone(n),e.options.animation&&!Rt&&s&&Vt.forEach((function(t){e.addAnimationState({target:t,rect:Lt}),t.fromRect=Lt,t.thisAnimationDuration=null}))}else e._showClone(n)}},dragOverAnimationCapture:function(t){var n=t.dragRect,i=t.isOwner,e=t.activeSortable;if(Ut.forEach((function(t){t.thisAnimationDuration=null})),e.options.animation&&!i&&e.multiDrag.isMultiDrag){Lt=Object.assign({},n);var o=b(Kt,!0);Lt.top-=o.f,Lt.left-=o.e}},dragOverAnimationComplete:function(){Xt&&(Xt=!1,$t())},drop:function(t){var n=t.originalEvent,i=t.rootEl,e=t.parentEl,o=t.sortable,r=t.dispatchSortableEvent,a=t.oldIndex,u=t.putSortable,s=u||this.sortable;if(n){var l=this.options,c=e.children;if(!Yt)if(l.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),g(Kt,l.selectedClass,!~Ut.indexOf(Kt)),~Ut.indexOf(Kt))Ut.splice(Ut.indexOf(Kt),1),Bt=null,F({sortable:o,rootEl:i,name:"deselect",targetEl:Kt,originalEvt:n});else{if(Ut.push(Kt),F({sortable:o,rootEl:i,name:"select",targetEl:Kt,originalEvt:n}),n.shiftKey&&Bt&&o.el.contains(Bt)){var f,h,d=x(Bt),v=x(Kt);if(~d&&~v&&d!==v)for(v>d?(h=d,f=v):(h=v,f=d+1);h<f;h++)~Ut.indexOf(c[h])||(g(c[h],l.selectedClass,!0),Ut.push(c[h]),F({sortable:o,rootEl:i,name:"select",targetEl:c[h],originalEvt:n}))}else Bt=Kt;Ht=s}if(Yt&&this.isMultiDrag){if((e[N].options.sort||e!==i)&&Ut.length>1){var m=y(Kt),p=x(Kt,":not(."+this.options.selectedClass+")");if(!Wt&&l.animation&&(Kt.thisAnimationDuration=null),s.captureAnimationState(),!Wt&&(l.animation&&(Kt.fromRect=m,Ut.forEach((function(t){if(t.thisAnimationDuration=null,t!==Kt){var n=Xt?y(t):m;t.fromRect=n,s.addAnimationState({target:t,rect:n})}}))),$t(),Ut.forEach((function(t){c[p]?e.insertBefore(t,c[p]):e.appendChild(t),p++})),a===x(Kt))){var b=!1;Ut.forEach((function(t){t.sortableIndex===x(t)||(b=!0)})),b&&r("update")}Ut.forEach((function(t){j(t)})),s.animateAll()}Ht=s}(i===e||u&&"clone"!==u.lastPutMode)&&Vt.forEach((function(t){t.parentNode&&t.parentNode.removeChild(t)}))}},nullingGlobal:function(){this.isMultiDrag=Yt=!1,Vt.length=0},destroyGlobal:function(){this._deselectMultiDrag(),c(document,"pointerup",this._deselectMultiDrag),c(document,"mouseup",this._deselectMultiDrag),c(document,"touchend",this._deselectMultiDrag),c(document,"keydown",this._checkKeyDown),c(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(t){if(!(void 0!==Yt&&Yt||Ht!==this.sortable||t&&d(t.target,this.options.draggable,this.sortable.el,!1)||t&&0!==t.button))for(;Ut.length;){var n=Ut[0];g(n,this.options.selectedClass,!1),Ut.shift(),F({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:n,originalEvt:t})}},_checkKeyDown:function(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},Object.assign(t,{pluginName:"multiDrag",utils:{select:function(t){var n=t.parentNode[N];n&&n.options.multiDrag&&!~Ut.indexOf(t)&&(Ht&&Ht!==n&&(Ht.multiDrag._deselectMultiDrag(),Ht=n),g(t,n.options.selectedClass,!0),Ut.push(t))},deselect:function(t){var n=t.parentNode[N],i=Ut.indexOf(t);n&&n.options.multiDrag&&~i&&(g(t,n.options.selectedClass,!1),Ut.splice(i,1))}},eventProperties:function(){var t=this,n=[],i=[];return Ut.forEach((function(e){var o;n.push({multiDragElement:e,index:e.sortableIndex}),o=Xt&&e!==Kt?-1:Xt?x(e,":not(."+t.options.selectedClass+")"):x(e),i.push({multiDragElement:e,index:o})})),{items:[].concat(Ut),clones:[].concat(Vt),oldIndicies:n,newIndicies:i}},optionListeners:{multiDragKey:function(t){return"ctrl"===(t=t.toLowerCase())?t="Control":t.length>1&&(t=t.charAt(0).toUpperCase()+t.substr(1)),t}}})});export{At as I}