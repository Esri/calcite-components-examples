/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.1.0
 */
import{c as t,b as n}from"./p-b4c2f2ce.js";import{d as e}from"./p-6293ed16.js";function o(t){return t.split("-")[1]}function r(t){return"y"===t?"height":"width"}function i(t){return t.split("-")[0]}function a(t){return["top","bottom"].includes(i(t))?"x":"y"}function l(t,n,e){let{reference:l,floating:s}=t;const c=l.x+l.width/2-s.width/2,f=l.y+l.height/2-s.height/2,u=a(n),d=r(u),m=l[d]/2-s[d]/2,p="x"===u;let y;switch(i(n)){case"top":y={x:c,y:l.y-s.height};break;case"bottom":y={x:c,y:l.y+l.height};break;case"right":y={x:l.x+l.width,y:f};break;case"left":y={x:l.x-s.width,y:f};break;default:y={x:l.x,y:l.y}}switch(o(n)){case"start":y[u]-=m*(e&&p?-1:1);break;case"end":y[u]+=m*(e&&p?-1:1)}return y}function s(t){return"number"!=typeof t?function(t){return{top:0,right:0,bottom:0,left:0,...t}}(t):{top:t,right:t,bottom:t,left:t}}function c(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}async function f(t,n){var e;void 0===n&&(n={});const{x:o,y:r,platform:i,rects:a,elements:l,strategy:f}=t,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:m="floating",altBoundary:p=!1,padding:y=0}=n,g=s(y),x=l[p?"floating"===m?"reference":"floating":m],h=c(await i.getClippingRect({element:null==(e=await(null==i.isElement?void 0:i.isElement(x)))||e?x:x.contextElement||await(null==i.getDocumentElement?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:f})),v="floating"===m?{...a.floating,x:o,y:r}:a.reference,b=await(null==i.getOffsetParent?void 0:i.getOffsetParent(l.floating)),w=await(null==i.isElement?void 0:i.isElement(b))&&await(null==i.getScale?void 0:i.getScale(b))||{x:1,y:1},A=c(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({rect:v,offsetParent:b,strategy:f}):v);return{top:(h.top-A.top+g.top)/w.y,bottom:(A.bottom-h.bottom+g.bottom)/w.y,left:(h.left-A.left+g.left)/w.x,right:(A.right-h.right+g.right)/w.x}}const u=Math.min,d=Math.max;function m(t,n,e){return d(t,u(n,e))}const p=["top","right","bottom","left"],y=p.reduce(((t,n)=>t.concat(n,n+"-start",n+"-end")),[]),g={left:"right",right:"left",bottom:"top",top:"bottom"};function x(t){return t.replace(/left|right|bottom|top/g,(t=>g[t]))}function h(t,n,e){void 0===e&&(e=!1);const i=o(t),l=a(t),s=r(l);let c="x"===l?i===(e?"end":"start")?"right":"left":"start"===i?"bottom":"top";return n.reference[s]>n.floating[s]&&(c=x(c)),{main:c,cross:x(c)}}const v={start:"end",end:"start"};function b(t){return t.replace(/start|end/g,(t=>v[t]))}const w=function(t){return void 0===t&&(t={}),{name:"flip",options:t,async fn(n){var e;const{placement:r,middlewareData:a,rects:l,initialPlacement:s,platform:c,elements:u}=n,{mainAxis:d=!0,crossAxis:m=!0,fallbackPlacements:p,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:v=!0,...w}=t,A=i(r),P=i(s)===s,k=await(null==c.isRTL?void 0:c.isRTL(u.floating)),D=p||(P||!v?[x(s)]:function(t){const n=x(t);return[b(t),n,b(n)]}(s));p||"none"===g||D.push(...function(t,n,e,r){const a=o(t);let l=function(t,n,e){const o=["left","right"],r=["right","left"],i=["top","bottom"],a=["bottom","top"];switch(t){case"top":case"bottom":return e?n?r:o:n?o:r;case"left":case"right":return n?i:a;default:return[]}}(i(t),"start"===e,r);return a&&(l=l.map((t=>t+"-"+a)),n&&(l=l.concat(l.map(b)))),l}(s,v,g,k));const R=[s,...D],F=await f(n,w),M=[];let E=(null==(e=a.flip)?void 0:e.overflows)||[];if(d&&M.push(F[A]),m){const{main:t,cross:n}=h(r,l,k);M.push(F[t],F[n])}if(E=[...E,{placement:r,overflows:M}],!M.every((t=>t<=0))){var S,C;const t=((null==(S=a.flip)?void 0:S.index)||0)+1,n=R[t];if(n)return{data:{index:t,overflows:E},reset:{placement:n}};let e=null==(C=E.filter((t=>t.overflows[0]<=0)).sort(((t,n)=>t.overflows[1]-n.overflows[1]))[0])?void 0:C.placement;if(!e)switch(y){case"bestFit":{var O;const t=null==(O=E.map((t=>[t.placement,t.overflows.filter((t=>t>0)).reduce(((t,n)=>t+n),0)])).sort(((t,n)=>t[1]-n[1]))[0])?void 0:O[0];t&&(e=t);break}case"initialPlacement":e=s}if(r!==e)return{reset:{placement:e}}}return{}}}};function A(t,n){return{top:t.top-n.height,right:t.right-n.width,bottom:t.bottom-n.height,left:t.left-n.width}}function P(t){return p.some((n=>t[n]>=0))}const k=function(t){return void 0===t&&(t={}),{name:"hide",options:t,async fn(n){const{strategy:e="referenceHidden",...o}=t,{rects:r}=n;switch(e){case"referenceHidden":{const t=A(await f(n,{...o,elementContext:"reference"}),r.reference);return{data:{referenceHiddenOffsets:t,referenceHidden:P(t)}}}case"escaped":{const t=A(await f(n,{...o,altBoundary:!0}),r.floating);return{data:{escapedOffsets:t,escaped:P(t)}}}default:return{}}}}};function D(t){var n;return(null==(n=t.ownerDocument)?void 0:n.defaultView)||window}function R(t){return D(t).getComputedStyle(t)}const F=Math.min,M=Math.max,E=Math.round;function S(t){const n=R(t);let e=parseFloat(n.width),o=parseFloat(n.height);const r=t.offsetWidth,i=t.offsetHeight,a=E(e)!==r||E(o)!==i;return a&&(e=r,o=i),{width:e,height:o,fallback:a}}function C(t){return B(t)?(t.nodeName||"").toLowerCase():""}let O;function $(){if(O)return O;const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?(O=t.brands.map((t=>t.brand+"/"+t.version)).join(" "),O):navigator.userAgent}function T(t){return t instanceof D(t).HTMLElement}function j(t){return t instanceof D(t).Element}function B(t){return t instanceof D(t).Node}function z(t){return"undefined"!=typeof ShadowRoot&&(t instanceof D(t).ShadowRoot||t instanceof ShadowRoot)}function L(t){const{overflow:n,overflowX:e,overflowY:o,display:r}=R(t);return/auto|scroll|overlay|hidden|clip/.test(n+o+e)&&!["inline","contents"].includes(r)}function H(t){return["table","td","th"].includes(C(t))}function N(t){const n=/firefox/i.test($()),e=R(t),o=e.backdropFilter||e.WebkitBackdropFilter;return"none"!==e.transform||"none"!==e.perspective||!!o&&"none"!==o||n&&"filter"===e.willChange||n&&!!e.filter&&"none"!==e.filter||["transform","perspective"].some((t=>e.willChange.includes(t)))||["paint","layout","strict","content"].some((t=>{const n=e.contain;return null!=n&&n.includes(t)}))}function I(){return/^((?!chrome|android).)*safari/i.test($())}function W(t){return["html","body","#document"].includes(C(t))}function q(t){return j(t)?t:t.contextElement}const G={x:1,y:1};function U(t){const n=q(t);if(!T(n))return G;const e=n.getBoundingClientRect(),{width:o,height:r,fallback:i}=S(n);let a=(i?E(e.width):e.width)/o,l=(i?E(e.height):e.height)/r;return a&&Number.isFinite(a)||(a=1),l&&Number.isFinite(l)||(l=1),{x:a,y:l}}function V(t,n,e,o){var r,i;void 0===n&&(n=!1),void 0===e&&(e=!1);const a=t.getBoundingClientRect(),l=q(t);let s=G;n&&(o?j(o)&&(s=U(o)):s=U(t));const c=l?D(l):window,f=I()&&e;let u=(a.left+(f&&(null==(r=c.visualViewport)?void 0:r.offsetLeft)||0))/s.x,d=(a.top+(f&&(null==(i=c.visualViewport)?void 0:i.offsetTop)||0))/s.y,m=a.width/s.x,p=a.height/s.y;if(l){const t=D(l),n=o&&j(o)?D(o):o;let e=t.frameElement;for(;e&&o&&n!==t;){const t=U(e),n=e.getBoundingClientRect(),o=getComputedStyle(e);n.x+=(e.clientLeft+parseFloat(o.paddingLeft))*t.x,n.y+=(e.clientTop+parseFloat(o.paddingTop))*t.y,u*=t.x,d*=t.y,m*=t.x,p*=t.y,u+=n.x,d+=n.y,e=D(e).frameElement}}return{width:m,height:p,top:d,right:u+m,bottom:d+p,left:u,x:u,y:d}}function X(t){return((B(t)?t.ownerDocument:t.document)||window.document).documentElement}function Y(t){return j(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function _(t){return V(X(t)).left+Y(t).scrollLeft}function J(t){if("html"===C(t))return t;const n=t.assignedSlot||t.parentNode||z(t)&&t.host||X(t);return z(n)?n.host:n}function K(t){const n=J(t);return W(n)?n.ownerDocument.body:T(n)&&L(n)?n:K(n)}function Q(t,n){var e;void 0===n&&(n=[]);const o=K(t),r=o===(null==(e=t.ownerDocument)?void 0:e.body),i=D(o);return r?n.concat(i,i.visualViewport||[],L(o)?o:[]):n.concat(o,Q(o))}function Z(t,n,e){let o;if("viewport"===n)o=function(t,n){const e=D(t),o=X(t),r=e.visualViewport;let i=o.clientWidth,a=o.clientHeight,l=0,s=0;if(r){i=r.width,a=r.height;const t=I();(!t||t&&"fixed"===n)&&(l=r.offsetLeft,s=r.offsetTop)}return{width:i,height:a,x:l,y:s}}(t,e);else if("document"===n)o=function(t){const n=X(t),e=Y(t),o=t.ownerDocument.body,r=M(n.scrollWidth,n.clientWidth,o.scrollWidth,o.clientWidth),i=M(n.scrollHeight,n.clientHeight,o.scrollHeight,o.clientHeight);let a=-e.scrollLeft+_(t);const l=-e.scrollTop;return"rtl"===R(o).direction&&(a+=M(n.clientWidth,o.clientWidth)-r),{width:r,height:i,x:a,y:l}}(X(t));else if(j(n))o=function(t,n){const e=V(t,!0,"fixed"===n),o=e.top+t.clientTop,r=e.left+t.clientLeft,i=T(t)?U(t):{x:1,y:1};return{width:t.clientWidth*i.x,height:t.clientHeight*i.y,x:r*i.x,y:o*i.y}}(n,e);else{const e={...n};if(I()){var r,i;const n=D(t);e.x-=(null==(r=n.visualViewport)?void 0:r.offsetLeft)||0,e.y-=(null==(i=n.visualViewport)?void 0:i.offsetTop)||0}o=e}return c(o)}function tt(t,n){return T(t)&&"fixed"!==R(t).position?n?n(t):t.offsetParent:null}function nt(t,n){const e=D(t);let o=tt(t,n);for(;o&&H(o)&&"static"===R(o).position;)o=tt(o,n);return o&&("html"===C(o)||"body"===C(o)&&"static"===R(o).position&&!N(o))?e:o||function(t){let n=J(t);for(;T(n)&&!W(n);){if(N(n))return n;n=J(n)}return null}(t)||e}function et(t,n,e){const o=T(n),r=X(n),i=V(t,!0,"fixed"===e,n);let a={scrollLeft:0,scrollTop:0};const l={x:0,y:0};if(o||!o&&"fixed"!==e)if(("body"!==C(n)||L(r))&&(a=Y(n)),T(n)){const t=V(n,!0);l.x=t.x+n.clientLeft,l.y=t.y+n.clientTop}else r&&(l.x=_(r));return{x:i.left+a.scrollLeft-l.x,y:i.top+a.scrollTop-l.y,width:i.width,height:i.height}}const ot={getClippingRect:function(t){let{element:n,boundary:e,rootBoundary:o,strategy:r}=t;const i=[..."clippingAncestors"===e?function(t,n){const e=n.get(t);if(e)return e;let o=Q(t).filter((t=>j(t)&&"body"!==C(t))),r=null;const i="fixed"===R(t).position;let a=i?J(t):t;for(;j(a)&&!W(a);){const t=R(a),n=N(a);"fixed"===t.position?r=null:(i?n||r:n||"static"!==t.position||!r||!["absolute","fixed"].includes(r.position))?r=t:o=o.filter((t=>t!==a)),a=J(a)}return n.set(t,o),o}(n,this._c):[].concat(e),o],a=i.reduce(((t,e)=>{const o=Z(n,e,r);return t.top=M(o.top,t.top),t.right=F(o.right,t.right),t.bottom=F(o.bottom,t.bottom),t.left=M(o.left,t.left),t}),Z(n,i[0],r));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{rect:n,offsetParent:e,strategy:o}=t;const r=T(e),i=X(e);if(e===i)return n;let a={scrollLeft:0,scrollTop:0},l={x:1,y:1};const s={x:0,y:0};if((r||!r&&"fixed"!==o)&&(("body"!==C(e)||L(i))&&(a=Y(e)),T(e))){const t=V(e);l=U(e),s.x=t.x+e.clientLeft,s.y=t.y+e.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-a.scrollLeft*l.x+s.x,y:n.y*l.y-a.scrollTop*l.y+s.y}},isElement:j,getDimensions:function(t){return T(t)?S(t):t.getBoundingClientRect()},getOffsetParent:nt,getDocumentElement:X,getScale:U,async getElementRects(t){let{reference:n,floating:e,strategy:o}=t;const r=this.getOffsetParent||nt,i=this.getDimensions;return{reference:et(n,await r(e),o),floating:{x:0,y:0,...await i(e)}}},getClientRects:t=>Array.from(t.getClientRects()),isRTL:t=>"rtl"===R(t).direction};const rt={floatingUINonChromiumPositioningFix:!0,...globalThis.calciteComponentsConfig},it=async function(){function t(){return navigator.userAgentData}if(rt.floatingUINonChromiumPositioningFix&&(/firefox|safari/i.test(function(){const n=t();return n?.brands?n.brands.map((({brand:t,version:n})=>`${t}/${n}`)).join(" "):navigator.userAgent}())||function(){const n=t();return n?.brands?!!n.brands.find((({brand:t,version:n})=>("Google Chrome"===t||"Chromium"===t)&&Number(n)>=109)):!!navigator.userAgent.split(" ").find((t=>{const[n,e]=t.split("/");return"Chrome"===n&&parseInt(e)>=109}))}())){const{offsetParent:t}=await import("./p-7aee1b7a.js"),n=ot.getOffsetParent;ot.getOffsetParent=e=>n(e,t)}}(),at=["top","bottom","right","left","top-start","top-end","bottom-start","bottom-end","right-start","right-end","left-start","left-end"],lt="bottom-start",st={animation:"calcite-floating-ui-anim",animationActive:"calcite-floating-ui-anim--active"};function ct({placement:t,flipDisabled:n,flipPlacements:e,offsetDistance:l,offsetSkidding:c,arrowEl:u,type:d}){const p=[(void 0===g&&(g={}),{name:"shift",options:g,async fn(t){const{x:n,y:e,placement:o}=t,{mainAxis:r=!0,crossAxis:l=!1,limiter:s={fn:t=>{let{x:n,y:e}=t;return{x:n,y:e}}},...c}=g,u={x:n,y:e},d=await f(t,c),p=a(i(o)),y="x"===p?"y":"x";let x=u[p],h=u[y];r&&(x=m(x+d["y"===p?"top":"left"],x,x-d["y"===p?"bottom":"right"])),l&&(h=m(h+d["y"===y?"top":"left"],h,h-d["y"===y?"bottom":"right"]));const v=s.fn({...t,[p]:x,[y]:h});return{...v,data:{x:v.x-n,y:v.y-e}}}}),k()];var g,x;if("menu"===d)return[...p,w({fallbackPlacements:e||["top-start","top","top-end","bottom-start","bottom","bottom-end"]})];if("popover"===d||"tooltip"===d){const d=[...p,(x={mainAxis:"number"==typeof l?l:0,crossAxis:"number"==typeof c?c:0},void 0===x&&(x=0),{name:"offset",options:x,async fn(t){const{x:n,y:e}=t,r=await async function(t,n){const{placement:e,platform:r,elements:l}=t,s=await(null==r.isRTL?void 0:r.isRTL(l.floating)),c=i(e),f=o(e),u="x"===a(e),d=["left","top"].includes(c)?-1:1,m=s&&u?-1:1,p="function"==typeof n?n(t):n;let{mainAxis:y,crossAxis:g,alignmentAxis:x}="number"==typeof p?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...p};return f&&"number"==typeof x&&(g="end"===f?-1*x:x),u?{x:g*m,y:y*d}:{x:y*d,y:g*m}}(t,x);return{x:n+r.x,y:e+r.y,data:r}}})];return"auto"===t||"auto-start"===t||"auto-end"===t?d.push(function(t){return void 0===t&&(t={}),{name:"autoPlacement",options:t,async fn(n){var e,r,a;const{rects:l,middlewareData:s,placement:c,platform:u,elements:d}=n,{crossAxis:m=!1,alignment:p,allowedPlacements:g=y,autoAlignment:x=!0,...v}=t,w=void 0!==p||g===y?function(t,n,e){return(t?[...e.filter((n=>o(n)===t)),...e.filter((n=>o(n)!==t))]:e.filter((t=>i(t)===t))).filter((e=>!t||o(e)===t||!!n&&b(e)!==e))}(p||null,x,g):g,A=await f(n,v),P=(null==(e=s.autoPlacement)?void 0:e.index)||0,k=w[P];if(null==k)return{};const{main:D,cross:R}=h(k,l,await(null==u.isRTL?void 0:u.isRTL(d.floating)));if(c!==k)return{reset:{placement:w[0]}};const F=[A[i(k)],A[D],A[R]],M=[...(null==(r=s.autoPlacement)?void 0:r.overflows)||[],{placement:k,overflows:F}],E=w[P+1];if(E)return{data:{index:P+1,overflows:M},reset:{placement:E}};const S=M.map((t=>{const n=o(t.placement);return[t.placement,n&&m?t.overflows.slice(0,2).reduce(((t,n)=>t+n),0):t.overflows[0],t.overflows]})).sort(((t,n)=>t[1]-n[1])),C=(null==(a=S.filter((t=>t[2].slice(0,o(t[0])?2:3).every((t=>t<=0))))[0])?void 0:a[0])||S[0][0];return C!==c?{data:{index:P+1,overflows:M},reset:{placement:C}}:{}}}}({alignment:"auto-start"===t?"start":"auto-end"===t?"end":null})):n||d.push(w(e?{fallbackPlacements:e}:{})),u&&d.push((t=>({name:"arrow",options:t,async fn(n){const{element:e,padding:i=0}=t||{},{x:l,y:c,placement:f,rects:u,platform:d}=n;if(null==e)return{};const p=s(i),y={x:l,y:c},g=a(f),x=r(g),h=await d.getDimensions(e),v="y"===g?"top":"left",b="y"===g?"bottom":"right",w=u.reference[x]+u.reference[g]-y[g]-u.floating[x],A=y[g]-u.reference[g],P=await(null==d.getOffsetParent?void 0:d.getOffsetParent(e));let k=P?"y"===g?P.clientHeight||0:P.clientWidth||0:0;0===k&&(k=u.floating[x]);const D=p[v],R=k-h[x]-p[b],F=k/2-h[x]/2+(w/2-A/2),M=m(D,F,R),E=null!=o(f)&&F!=M&&u.reference[x]/2-(F<D?p[v]:p[b])-h[x]/2<0;return{[g]:y[g]-(E?F<D?D-F:R-F:0),data:{[g]:M,centerOffset:F-M}}}}))({element:u})),d}return[]}function ft(t,n){const e=t.filter((t=>at.includes(t)));return e.length!==t.length&&console.warn(`${n.tagName}: Invalid value found in: flipPlacements. Try any of these: ${at.map((t=>`"${t}"`)).join(", ").trim()}`,{el:n}),e}function ut(t,e){const o=["left","right"];return"rtl"===n(t)&&o.reverse(),e.replace(/leading/gi,o[0]).replace(/trailing/gi,o[1])}async function dt(t,n,e=!1){if(t.open)return e?mt(n):pt(n)}const mt=e(pt,100,{leading:!0,maxWait:100});async function pt({referenceEl:t,floatingEl:n,overlayPositioning:e="absolute",placement:o,flipDisabled:r,flipPlacements:i,offsetDistance:a,offsetSkidding:s,includeArrow:c=!1,arrowEl:f,type:u}){if(!t||!n||c&&!f)return null;await it;const{x:d,y:m,placement:p,strategy:y,middlewareData:g}=await((t,n,e)=>{const o=new Map,r={platform:ot,...e},i={...r.platform,_c:o};return(async(t,n,e)=>{const{placement:o="bottom",strategy:r="absolute",middleware:i=[],platform:a}=e,s=i.filter(Boolean),c=await(null==a.isRTL?void 0:a.isRTL(n));let f=await a.getElementRects({reference:t,floating:n,strategy:r}),{x:u,y:d}=l(f,o,c),m=o,p={},y=0;for(let e=0;e<s.length;e++){const{name:i,fn:g}=s[e],{x,y:h,data:v,reset:b}=await g({x:u,y:d,initialPlacement:o,placement:m,strategy:r,middlewareData:p,rects:f,platform:a,elements:{reference:t,floating:n}});u=null!=x?x:u,d=null!=h?h:d,p={...p,[i]:{...p[i],...v}},b&&y<=50&&(y++,"object"==typeof b&&(b.placement&&(m=b.placement),b.rects&&(f=!0===b.rects?await a.getElementRects({reference:t,floating:n,strategy:r}):b.rects),({x:u,y:d}=l(f,m,c))),e=-1)}return{x:u,y:d,placement:m,strategy:r,middlewareData:p}})(t,n,{...r,platform:i})})(t,n,{strategy:e,placement:"auto"===o||"auto-start"===o||"auto-end"===o?void 0:ut(n,o),middleware:ct({placement:o,flipDisabled:r,flipPlacements:i,offsetDistance:a,offsetSkidding:s,arrowEl:f,type:u})});if(g?.arrow){const{x:t,y:n}=g.arrow;Object.assign(f.style,{left:null!=t?`${t}px`:"",top:null!=n?`${n}px`:""})}const x=g?.hide?.referenceHidden?"hidden":null,h=x?"none":null;n.setAttribute("data-placement",p);const v=`translate(${Math.round(d)}px,${Math.round(m)}px)`;Object.assign(n.style,{visibility:x,pointerEvents:h,position:y,top:"0",left:"0",transform:v})}const yt=new WeakMap;function gt(t,n,e){if(!e||!n)return;xt(t,n,e);const o=t.overlayPositioning;Object.assign(e.style,{visibility:"hidden",pointerEvents:"none",position:o}),"absolute"===o&&At(e),yt.set(t,function(t,n,e,o){void 0===o&&(o={});const{ancestorScroll:r=!0,ancestorResize:i=!0,elementResize:a=!0,animationFrame:l=!1}=o,s=r&&!l,c=s||i?[...j(t)?Q(t):t.contextElement?Q(t.contextElement):[],...Q(n)]:[];c.forEach((t=>{s&&t.addEventListener("scroll",e,{passive:!0}),i&&t.addEventListener("resize",e)}));let f,u=null;if(a){let o=!0;u=new ResizeObserver((()=>{o||e(),o=!1})),j(t)&&!l&&u.observe(t),j(t)||!t.contextElement||l||u.observe(t.contextElement),u.observe(n)}let d=l?V(t):null;return l&&function n(){const o=V(t);!d||o.x===d.x&&o.y===d.y&&o.width===d.width&&o.height===d.height||e(),d=o,f=requestAnimationFrame(n)}(),e(),()=>{var t;c.forEach((t=>{s&&t.removeEventListener("scroll",e),i&&t.removeEventListener("resize",e)})),null==(t=u)||t.disconnect(),u=null,l&&cancelAnimationFrame(f)}}(n,e,(()=>t.reposition())))}function xt(t,n,e){if(!e||!n)return;bt(e).removeEventListener("transitionend",wt);const o=yt.get(t);o&&o(),yt.delete(t)}const ht=Math.ceil(Math.hypot(4,4));function vt(t){t&&"absolute"===t.style.position&&bt(t).addEventListener("transitionend",wt)}function bt(t){return t.shadowRoot||t}function wt(n){const e=n.target;if("opacity"===n.propertyName&&e.classList.contains(st.animation)){const n=function(n){return t(n,"[data-placement]")}(e);At(n),bt(n).removeEventListener("transitionend",wt)}}function At(t){t.style.transform="",t.style.top="0",t.style.left="0"}export{st as F,xt as a,ht as b,gt as c,lt as d,ft as f,dt as r,vt as u}